{% extends 'base.html' %}
{% load static %}
{% block link %}
    <link rel="stylesheet" href="{% static 'styles/landing_page.css' %}?v={{ timestamp }}">
    <link rel="stylesheet" href="{% static 'styles/exam.css' %}?v={{ timestamp }}">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

{% endblock %}

{% block content %}
  <!-- content -->
        <div class="exam">
        <h2>
            {% if subject == 'AERO' %}
                Aerodynamics (25%)
            {% elif subject == 'MATH' %}
                Mathematics (10%)
            {% elif subject == 'STRUC' %}
                Aircraft Structures and Design (20%)
            {% elif subject == 'ACRM' %}
                Aircraft Construction Repair and Modification (15%)
            {% elif subject == 'PWRP' %}
                Aircraft Power Plant (20%)
            {% elif subject == 'EEMLE' %}
                Engineering Economics and Management Laws and Ethics (10%)
            {% endif %}
        </h2>

        <form method="POST" class="exam_form" action="{% url 'exam_result' subject=subject %}">
            {% csrf_token %}

            {% for question in questions %}
                <div class="exam_question">
                    <p><strong>{{ forloop.counter }}:</strong> {{ question.text }}</p>

                    <ul>
                        <li>
                            <input type="radio" id="option_a_{{ forloop.counter }}" name="question_{{ question.id }}" value="A" class="square-radio">
                            <label for="option_a_{{ forloop.counter }}">A. {{ question.option_a }}</label>
                        </li>
                        <li>
                            <input type="radio" id="option_b_{{ forloop.counter }}" name="question_{{ question.id }}" value="B" class="square-radio">
                            <label for="option_b_{{ forloop.counter }}">B. {{ question.option_b }}</label>
                        </li>
                        {% if question.option_c %}
                            <li>
                                <input type="radio" id="option_c_{{ forloop.counter }}" name="question_{{ question.id }}" value="C" class="square-radio">
                                <label for="option_c_{{ forloop.counter }}">C. {{ question.option_c }}</label>
                            </li>
                        {% endif %}
                        {% if question.option_d %}
                            <li>
                                <input type="radio" id="option_d_{{ forloop.counter }}" name="question_{{ question.id }}" value="D" class="square-radio">
                                <label for="option_d_{{ forloop.counter }}">D. {{ question.option_d }}</label>
                            </li>
                        {% endif %}
                    </ul>
                </div>
            {% endfor %}

            <button class="submit_exam" type="submit">Submit Answers</button>
        </form>
    </div>
        <script>
          document.addEventListener("DOMContentLoaded", function () {
            const form = document.querySelector(".exam_form");

            form.addEventListener("submit", function (e) {
              const confirmed = confirm("Are you sure you want to submit your answers?");
              if (!confirmed) {
                e.preventDefault(); // Stop the form from submitting
              }
            });
          });
        </script>
{% endblock %}