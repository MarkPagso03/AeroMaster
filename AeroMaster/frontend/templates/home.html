{% extends 'base.html' %}
{% load static %}
{% block link %}
    <link rel="stylesheet" href="{% static 'styles/home_page.css' %}?v={{ timestamp }}">
{% endblock %}

{% block content %}
    <div class="home">
        <h1>Examination Progress</h1>
        {% if messages %}
            <div class="messages">
                {% for message in messages %}
                    <div class="alert {{ message.tags }}">
                        {{ message }}
                    </div>
                {% endfor %}
            </div>
        {% endif %}
        <div class="progress">
            <div class="progress_card">
                <h4><b>DAY 1</b></h4>
                <div class="subject_card">
                    <h5><b>AERODYNAMICS</b> - 25%</h5>
                    <p>Fundamentals of Low-High Speed
                        Aerodynamics Application of Aerodynamics to
                        Fixed/ Rotary Wiring Aircraft Configurations,
                        Performance, Stability and Control; Wind Tunnels and Application
                        <br><br>
                        {{ aero_setting.date_time }} - {{ aero_setting.end_time }}
                    </p>
                    {% if aero_setting %}
                        <button id="aero_start" onclick="window.location.href = '{% url 'mock_exam' subject='AERO' %}'">START</button>

                        <script>
                        const currentTime = new Date();
                        const aeroSchedule = new Date("{{ aero_setting.date_time|date:'c' }}");

                        const aeroEndTime = new Date("{{ aero_setting.end_time|date:'c' }}");

                        // Disable the button if current time is before the start OR after 1 hour has passed
                        if (currentTime < aeroSchedule || currentTime > aeroEndTime) {
                            const button = document.getElementById('aero_start');
                            button.disabled = true;
                            button.classList.add('disable');
                        }
                    </script>
                    {% endif %}
                </div>

                <div class="subject_card">
                    <h5><b>Mathematics</b> - 10%</h5>
                    <p>Algebra, Trigonometry, Analytical Geometry,
                        Calculus and Differential Equation with
                        Aeronautical Engineering Applications
                        <br><br>
                        {{ math_setting.date_time }} - {{ math_setting.end_time }}
                    </p>
                    {% if math_setting %}
                        <button id="math_start" onclick="window.location.href = '{% url 'mock_exam' subject='MATH' %}'">START</button>

                        <script>
                        //const currentTime = new Date();
                        const mathSchedule = new Date("{{ math_setting.date_time|date:'c' }}");

                        const mathEndTime = new Date("{{ math_setting.end_time|date:'c' }}");

                        // Disable the button if current time is before the start OR after 1 hour has passed
                        if (currentTime < mathSchedule || currentTime > mathEndTime) {
                            const button = document.getElementById('math_start');
                            button.disabled = true;
                            button.classList.add('disable');
                        }
                    </script>
                    {% endif %}
                </div>
            </div>

            <div class="progress_card">
                <h4><b>DAY 2</b></h4>
                <div class="subject_card">
                    <h5><b>AIRCRAFT STRUCTURES AND DESIGN</b> - 20%</h5>
                    <p>Aircraft Design Fundamentals; Structural Loading Conditions;
                        Structural Analysis and Design of Airframe Components;
                        Landing Gears, Engine Mounts and Other Structural Parts;
                        Non-Structural Components Design
                        <br><br>
                        {{ struc_setting.date_time }} - {{ struc_setting.end_time }}
                    </p>
                    {% if struc_setting %}
                        <button id="struc_start" onclick="window.location.href = '{% url 'mock_exam' subject='STRUC' %}'">START</button>

                        <script>
                        //const currentTime = new Date();
                        const strucSchedule = new Date("{{ struc_setting.date_time|date:'c' }}");

                        const strucEndTime = new Date("{{ struc_setting.end_time|date:'c' }}");

                        // Disable the button if current time is before the start OR after 1 hour has passed
                        if (currentTime < strucSchedule || currentTime > strucEndTime) {
                            const button = document.getElementById('struc_start');
                            button.disabled = true;
                            button.classList.add('disable');
                        }
                    </script>
                    {% endif %}
                </div>
                <div class="subject_card">
                    <h5><b>AIRCRAFT CONSTRUCTION, REPAIR AND MODIFICATION</b> - 15%</h5>
                    <p>Aircraft Materials and Processes; Methods and Techniques
                        in Repair and Modification in accordance with Civil
                        Airworthiness Regulations; Manufacturing/Production
                        Processes and Quality Assurance
                        <br><br>
                        {{ acrm_setting.date_time }} - {{ acrm_setting.end_time }}
                    </p>
                    {% if acrm_setting %}
                        <button id="acrm_start" onclick="window.location.href = '{% url 'mock_exam' subject='ACRM' %}'">START</button>

                        <script>
                        //const currentTime = new Date();
                        const acrmSchedule = new Date("{{ acrm_setting.date_time|date:'c' }}");

                        const acrmEndTime = new Date("{{ acrm_setting.end_time|date:'c' }}");

                        // Disable the button if current time is before the start OR after 1 hour has passed
                        if (currentTime < acrmSchedule || currentTime > acrmEndTime) {
                            const button = document.getElementById('acrm_start');
                            button.disabled = true;
                            button.classList.add('disable');
                        }
                    </script>
                    {% endif %}
                </div>
            </div>

            <div class="progress_card">
                <h4><b>DAY 3</b></h4>
                <div class="subject_card">
                    <h5><b>AIRCRAFT POWER PLANT</b> - 20%</h5>
                    <p>Thermodynamics and Power Plant Design and
                        Operation Fundamentals with Applications to
                        Internal Combustion Engine Reciprocation
                        Engines Aircraft Gas Turbines, Pulsejet and
                        Ramjet, Rocket Propulsion System and other
                        Aircraft Power Systems
                        <br><br>
                        {{ pwrp_setting.date_time }} - {{ pwrp_setting.end_time }}
                    </p>
                    {% if pwrp_setting %}
                        <button id="pwrp_start" onclick="window.location.href = '{% url 'mock_exam' subject='PWRP' %}'">START</button>

                    <script>
                        //const currentTime = new Date();
                        const pwrpSchedule = new Date("{{ pwrp_setting.date_time|date:'c' }}");

                        const pwrpEndTime = new Date("{{ pwrp_setting.end_time|date:'c' }}");

                        // Disable the button if current time is before the start OR after 1 hour has passed
                        if (currentTime < pwrpSchedule || currentTime > pwrpEndTime) {
                            const button = document.getElementById('pwrp_start');
                            button.disabled = true;
                            button.classList.add('disable');
                        }
                    </script>
                    {% endif %}
                </div>
                <div class="subject_card">
                    <h5><b>ENGINEERING ECONOMICS AND MANAGEMENT LAWS AND ETHICS</b> - 10%</h5>
                    <p>Principle of Economics and Management as Applied to Aviation
                        Industry; Laws, Rules and Regulations Governing the Practice
                        of Aeronautical Engineering to include PD 1570, Rules and
                        Regulations with Code of Professional Ethics of the Board of
                        Aeronautical Engineering and others (International Aviation Laws)
                        <br><br>
                        {{ eemle_setting.date_time }} - {{ eemle_setting.end_time }}
                    </p>
                    {% if eemle_setting %}
                        <button id="eemle_start" onclick="window.location.href = '{% url 'mock_exam' subject='EEMLE' %}'">START</button>

                        <script>
                        //const currentTime = new Date();
                        const eemleSchedule = new Date("{{ eemle_setting.date_time|date:'c' }}");

                        const eemleEndTime = new Date("{{ eemle_setting.end_time|date:'c' }}");

                        // Disable the button if current time is before the start OR after 1 hour has passed
                        if (currentTime < eemleSchedule || currentTime > eemleEndTime) {
                            const button = document.getElementById('eemle_start');
                            button.disabled = true;
                            button.classList.add('disable');
                        }
                    </script>
                    {% endif %}
                </div>
            </div>



        </div>
    </div>
    <script>
        setTimeout(function() {
            const alerts = document.querySelectorAll('.alert');
            alerts.forEach(alert => {
                alert.style.opacity = '0';
                alert.style.transition = 'opacity 0.5s ease';
                setTimeout(() => alert.remove(), 5000); // remove from DOM after fade out
            });
        }, 5500); // 5 seconds
    </script>


{% include 'footer.html' %}
{% endblock %}